<Page x:Class="Florence.Desktop.Views.CustomerForm"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:controls="clr-namespace:Florence.Desktop.Controls"
      Background="#202020"
      Title="Create Customer">

    <Page.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Page.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <controls:BackToDashboardButton 
                Grid.Column="0"
                Width="140"
                Height="30"
                Margin="0,0,20,0" Loaded="BackToDashboardButton_Loaded"/>

            <TextBlock Text="{Binding HeaderText}"
                       Grid.Column="1"
                       FontSize="28"
                       FontWeight="Bold"
                       Foreground="White"
                       VerticalAlignment="Center"/>
        </Grid>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <Border Background="#2D2D2D"
                        CornerRadius="8"
                        Padding="30"
                        Margin="0,0,0,20">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.15"/>
                    </Border.Effect>

                    <StackPanel>
                        <StackPanel Margin="0,0,0,15">
                            <TextBlock Text="Name *" Style="{StaticResource FormLabel}"/>
                            <TextBox Text="{Binding Customer.Name, UpdateSourceTrigger=PropertyChanged}"
                                     Style="{StaticResource FormTextBox}"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,15">
                            <TextBlock Text="Phone" Style="{StaticResource FormLabel}"/>
                            <TextBox Text="{Binding Customer.Phone, UpdateSourceTrigger=PropertyChanged}"
                                     Style="{StaticResource FormTextBox}"
                                     PreviewTextInput="PhoneTextBox_PreviewTextInput"
                                     MaxLength="15"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,15">
                            <TextBlock Text="Address" Style="{StaticResource FormLabel}"/>
                            <TextBox Text="{Binding Customer.Address}"
                                     AcceptsReturn="True"
                                     TextWrapping="Wrap"
                                     Height="70"
                                     Style="{StaticResource FormTextBox}"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,15">
                            <TextBlock Text="Email" Style="{StaticResource FormLabel}"/>
                            <TextBox Text="{Binding Customer.Email}"
                                     Style="{StaticResource FormTextBox}"/>
                        </StackPanel>

                        <TextBlock Text="{Binding Error}"
                                   Foreground="#D13438"
                                   FontWeight="SemiBold"
                                   Visibility="{Binding HasErrors, Converter={StaticResource BooleanToVisibilityConverter}}"
                                   Margin="0,5,0,10"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,20,0,0">
            <Button Content="Save"
                    Style="{StaticResource PrimaryButton}"
                    Command="{Binding SaveCommand}"
                    Margin="0,0,10,0"/>
            <Button Content="Clear"
                    Style="{StaticResource SecondaryButton}"
                    Command="{Binding ClearCommand}"/>
        </StackPanel>
    </Grid>
</Page>