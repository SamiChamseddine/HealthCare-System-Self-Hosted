<mah:MetroWindow x:Class="Florence.Desktop.Views.PatientViewWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
                 Title="Patient Details"
                 WindowStartupLocation="CenterOwner"
                 Width="600"
                 Height="600"
                 Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                 BorderThickness="0"
                 GlowBrush="{DynamicResource MahApps.Brushes.Accent}">

    <mah:MetroWindow.Resources>
        <Style x:Key="SectionHeader" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{DynamicResource MahApps.Brushes.Text}"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>

        <Style x:Key="LabelText" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Margin" Value="0,4,0,0"/>
            <Setter Property="Foreground" Value="{DynamicResource MahApps.Brushes.Text}"/>
        </Style>

        <Style x:Key="ValueText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="{DynamicResource MahApps.Brushes.Text}"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>

        <Style x:Key="SectionCard" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource MahApps.Brushes.Control.Background2}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource MahApps.Brushes.Control.Border}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>
    </mah:MetroWindow.Resources>

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>

                <TextBlock Text="Patient Details"
                           FontSize="26"
                           FontWeight="Bold"
                           Margin="0,0,0,25"
                           Foreground="{DynamicResource MahApps.Brushes.Text}"/>

                <Border Style="{StaticResource SectionCard}">
                    <StackPanel>
                        <TextBlock Text="Basic Information" Style="{StaticResource SectionHeader}"/>

                        <TextBlock Text="Full Name" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding FullName}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Date of Birth" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding DateOfBirth, StringFormat='{}{0:yyyy-MM-dd}'}"
                                   Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Gender" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding Gender}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Address" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding Address}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Phone Number" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding PhoneNumber}" Style="{StaticResource ValueText}"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource SectionCard}">
                    <StackPanel>
                        <TextBlock Text="Emergency Contact" Style="{StaticResource SectionHeader}"/>

                        <TextBlock Text="Name" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding EmergencyContact}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Relationship" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding EmergencyRelationship}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Phone" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding EmergencyPhone}" Style="{StaticResource ValueText}"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource SectionCard}">
                    <StackPanel>
                        <TextBlock Text="Insurance" Style="{StaticResource SectionHeader}"/>

                        <TextBlock Text="Provider" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding InsuranceProvider}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Policy Number" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding PolicyNumber}" Style="{StaticResource ValueText}"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource SectionCard}">
                    <StackPanel>
                        <TextBlock Text="Medical History" Style="{StaticResource SectionHeader}"/>

                        <TextBlock Text="Conditions" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding MedicalConditionsJson}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Medications" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding CurrentMedications}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Surgeries" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding Surgeries}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Allergies" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding Allergies}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Family History" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding FamilyHistoryJson}" Style="{StaticResource ValueText}"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource SectionCard}">
                    <StackPanel>
                        <TextBlock Text="Additional Information" Style="{StaticResource SectionHeader}"/>

                        <TextBlock Text="Preferred Language" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding PreferredLanguage}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Interpreter Needed" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding InterpreterNeeded}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Primary Care Physician" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding PrimaryCarePhysician}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Physician Phone" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding PhysicianPhone}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Vaccinations" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding Vaccinations}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Current Pain Level" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding CurrentPain}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Gynecological History" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding GynecologicalHistory}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Mental Health Issues" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding MentalHealthIssues}" Style="{StaticResource ValueText}"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource SectionCard}">
                    <StackPanel>
                        <TextBlock Text="Record Metadata" Style="{StaticResource SectionHeader}"/>

                        <TextBlock Text="Created By" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding CreatedBy}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Created At" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding CreatedAt}" Style="{StaticResource ValueText}"/>

                        <TextBlock Text="Updated At" Style="{StaticResource LabelText}"/>
                        <TextBlock Text="{Binding UpdatedAt}" Style="{StaticResource ValueText}"/>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <StackPanel Grid.Row="1"
            Orientation="Horizontal"
            HorizontalAlignment="Right"
            Margin="0,20,0,0">

            <Button Content="Print Patient"
            Width="140"
            Height="38"
            Style="{StaticResource PrimaryButton}"
            Click="Print_Click"
            Margin="0,0,10,0"/>

            <Button Content="Close"
            Width="120"
            Height="38"
            Style="{StaticResource SecondaryButton}"
            Click="Close_Click"/>
        </StackPanel>


    </Grid>
</mah:MetroWindow>
